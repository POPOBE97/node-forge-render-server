{
  "version": "1.0",
  "metadata": {
    "name": "Gradient Blur Mipmap Blend",
    "created": "2026-02-09T18:09:59.142Z",
    "modified": "2026-02-10T12:00:00.000Z"
  },
  "nodes": [
    {
      "id": "Screen_1",
      "type": "Screen",
      "position": {
        "x": 2500,
        "y": -720
      },
      "width": 160,
      "label": "Screen",
      "params": {
        "width": 392,
        "height": 871
      }
    },
    {
      "id": "RenderTexture_3",
      "type": "RenderTexture",
      "position": {
        "x": 2320,
        "y": -860
      },
      "width": 160,
      "label": "Render Texture",
      "params": {
        "width": 1080,
        "height": 2400,
        "format": "rgba8unorm-srgb"
      }
    },
    {
      "id": "RenderPass_mip0",
      "type": "RenderPass",
      "position": {
        "x": 900,
        "y": -800
      },
      "width": 160,
      "label": "mip0 (1080x2400)",
      "params": {
        "name": "mip0",
        "blend_preset": "premul_alpha",
        "blendfunc": "add",
        "src_factor": "one",
        "dst_factor": "one-minus-src-alpha",
        "src_alpha_factor": "one",
        "dst_alpha_factor": "one-minus-src-alpha"
      }
    },
    {
      "id": "Rect2DGeometry_8",
      "type": "Rect2DGeometry",
      "position": {
        "x": 900,
        "y": -940
      },
      "width": 160,
      "label": "2D Rect",
      "params": {
        "radius": 0,
        "smooth": 1,
        "size": {
          "x": 1080,
          "y": 2400
        },
        "position": {
          "x": 540,
          "y": 1200
        }
      }
    },
    {
      "id": "Kernel_9",
      "type": "Kernel",
      "position": {
        "x": 900,
        "y": -640
      },
      "width": 160,
      "label": "Kernel",
      "params": {
        "preset": "CrossBox",
        "source": "return {\n  width: 3,\n  height: 3,\n  value: [\n    0, 0.25, 0,\n    0.25, 0, 0.25,\n    0, 0.25, 0,\n  ],\n};\n"
      }
    },
    {
      "id": "Downsample_mip1",
      "type": "Downsample",
      "position": {
        "x": 900,
        "y": -480
      },
      "width": 160,
      "label": "mip1 (540x1200)",
      "params": {
        "sampling": "Mirror",
        "targetSize": {
          "x": 540,
          "y": 1200
        }
      }
    },
    {
      "id": "Downsample_mip2",
      "type": "Downsample",
      "position": {
        "x": 900,
        "y": -120
      },
      "width": 160,
      "label": "mip2 (270x600)",
      "params": {
        "sampling": "Mirror",
        "targetSize": {
          "x": 270,
          "y": 600
        }
      }
    },
    {
      "id": "Downsample_mip3",
      "type": "Downsample",
      "position": {
        "x": 900,
        "y": 240
      },
      "width": 160,
      "label": "mip3 (135x300)",
      "params": {
        "sampling": "Mirror",
        "targetSize": {
          "x": 135,
          "y": 300
        }
      }
    },
    {
      "id": "Kernel_14",
      "type": "Kernel",
      "position": {
        "x": 900,
        "y": -280
      },
      "width": 160,
      "label": "Kernel",
      "params": {
        "preset": "CrossBox",
        "source": "return {\n  width: 3,\n  height: 3,\n  value: [\n    0, 0.25, 0,\n    0.25, 0, 0.25,\n    0, 0.25, 0,\n  ],\n};\n"
      }
    },
    {
      "id": "Kernel_15",
      "type": "Kernel",
      "position": {
        "x": 900,
        "y": 80
      },
      "width": 160,
      "label": "Kernel",
      "params": {
        "preset": "CrossBox",
        "source": "return {\n  width: 3,\n  height: 3,\n  value: [\n    0, 0.25, 0,\n    0.25, 0, 0.25,\n    0, 0.25, 0,\n  ],\n};\n"
      }
    },
    {
      "id": "Downsample_mip4",
      "type": "Downsample",
      "position": {
        "x": 900,
        "y": 600
      },
      "width": 160,
      "label": "mip4 (67x150)",
      "params": {
        "sampling": "Mirror",
        "targetSize": {
          "x": 67,
          "y": 150
        }
      }
    },
    {
      "id": "Kernel_17",
      "type": "Kernel",
      "position": {
        "x": 900,
        "y": 440
      },
      "width": 160,
      "label": "Kernel",
      "params": {
        "preset": "CrossBox",
        "source": "return {\n  width: 3,\n  height: 3,\n  value: [\n    0, 0.25, 0,\n    0.25, 0, 0.25,\n    0, 0.25, 0,\n  ],\n};\n"
      }
    },
    {
      "id": "Downsample_mip5",
      "type": "Downsample",
      "position": {
        "x": 900,
        "y": 960
      },
      "width": 160,
      "label": "mip5 (33x75)",
      "params": {
        "sampling": "Mirror",
        "targetSize": {
          "x": 33,
          "y": 75
        }
      }
    },
    {
      "id": "Kernel_19",
      "type": "Kernel",
      "position": {
        "x": 900,
        "y": 800
      },
      "width": 160,
      "label": "Kernel",
      "params": {
        "preset": "CrossBox",
        "source": "return {\n  width: 3,\n  height: 3,\n  value: [\n    0, 0.25, 0,\n    0.25, 0, 0.25,\n    0, 0.25, 0,\n  ],\n};\n"
      }
    },
    {
      "id": "Downsample_mip6",
      "type": "Downsample",
      "position": {
        "x": 900,
        "y": 1320
      },
      "width": 160,
      "label": "mip6 (16x37)",
      "params": {
        "sampling": "Mirror",
        "targetSize": {
          "x": 16,
          "y": 37
        }
      }
    },
    {
      "id": "Kernel_21",
      "type": "Kernel",
      "position": {
        "x": 900,
        "y": 1160
      },
      "width": 160,
      "label": "Kernel",
      "params": {
        "preset": "CrossBox",
        "source": "return {\n  width: 3,\n  height: 3,\n  value: [\n    0, 0.25, 0,\n    0.25, 0, 0.25,\n    0, 0.25, 0,\n  ],\n};\n"
      }
    },
    {
      "id": "ImageTexture_24",
      "type": "ImageTexture",
      "position": {
        "x": 900,
        "y": -1220
      },
      "width": 192,
      "label": "Image Texture",
      "params": {
        "path": "baseline.png",
        "addressModeU": "mirror-repeat",
        "addressModeV": "mirror-repeat",
        "magFilter": "nearest",
        "minFilter": "nearest",
        "mipmapFilter": "nearest",
        "encoderSpace": "srgb",
        "alphaMode": "straight"
      }
    },
    {
      "id": "RenderPass_final",
      "type": "RenderPass",
      "position": {
        "x": 2140,
        "y": -720
      },
      "width": 160,
      "label": "Final Pass",
      "params": {
        "name": "Final Pass",
        "blend_preset": "premul_alpha",
        "blendfunc": "add",
        "src_factor": "one",
        "dst_factor": "one-minus-src-alpha",
        "src_alpha_factor": "one",
        "dst_alpha_factor": "one-minus-src-alpha"
      }
    },
    {
      "id": "Composite_84",
      "type": "Composite",
      "position": {
        "x": 2320,
        "y": -720
      },
      "width": 160,
      "label": "Composite",
      "params": {
        "clear": true,
        "clearColor": [
          0,
          0,
          0,
          0
        ]
      }
    },
    {
      "id": "Rect2DGeometry_final",
      "type": "Rect2DGeometry",
      "position": {
        "x": 2140,
        "y": -860
      },
      "width": 160,
      "label": "2D Rect",
      "params": {
        "radius": 0,
        "smooth": 1,
        "size": {
          "x": 1080,
          "y": 2400
        },
        "position": {
          "x": 540,
          "y": 1200
        }
      }
    },
    {
      "id": "GeoFragcoord_1",
      "type": "GeoFragcoord",
      "position": {
        "x": 1300,
        "y": -1000
      },
      "width": 160,
      "label": "FRAGCOORD",
      "params": {}
    },
    {
      "id": "MathClosure_calculateMaskLinear",
      "type": "MathClosure",
      "position": {
        "x": 1500,
        "y": -1000
      },
      "width": 280,
      "label": "calculateMaskLinear",
      "params": {
        "source": "// calculateMaskLinear(vec2 xy) -> float m\n// Exact match of original shader:\n// float calculateMaskLinear(vec2 xy){\n//   vec3 pStart = vec3(0.0, 0.0, 0.0);\n//   vec3 pEnd   = vec3(0.0, uOriginTextureBoundRect.w, 40.0);\n//   ...\n// }\n\n// uOriginTextureBoundRect.w = texture height = 2400\nfloat textureHeight = 2400.0;\n\nvec3 pStart = vec3(0.0, 0.0, 0.0);\nvec3 pEnd   = vec3(0.0, textureHeight, 40.0);\n\nvec2 qBase = pEnd.xy - pStart.xy;  // = vec2(0, 2400)\nfloat md = dot(qBase, qBase);       // = 2400^2 = 5760000\nvec2 q = xy - pStart.xy;            // = xy\nfloat p = dot(q, qBase);            // = xy.y * 2400\n\n// smoothstep(edge0=md, edge1=0, x=p)\n// Returns 0 when p >= md (y >= height)\n// Returns 1 when p <= 0 (y <= 0)\nfloat m = smoothstep(md, 0.0, p);\n\n// m: 1 at y=0, 0 at y=height\n// Result: 40 + (0-40)*m = 40*(1-m)\n// At y=0: 40*0 = 0\n// At y=height: 40*1 = 40\nm = pEnd.z + (pStart.z - pEnd.z) * m;\n\n// log2(radius * 1.333333)\nm = log2(m * 1.333333);\n\n// Clamp to valid mip range [0, 6]\noutput = clamp(m, 0.0, 6.0);"
      },
      "inputs": [
        {
          "id": "dynamic_xy",
          "name": "xy",
          "type": "vector2"
        }
      ],
      "outputs": [
        {
          "id": "output",
          "name": "Output",
          "type": "float"
        }
      ],
      "inputBindings": [
        {
          "portId": "dynamic_xy",
          "label": "xy",
          "variableName": "xy",
          "type": "vector2",
          "sourceBinding": {
            "nodeId": "GeoFragcoord_1",
            "outputPortId": "xy",
            "outputLabel": "XY"
          }
        }
      ]
    },
    {
      "id": "MathClosure_fragment",
      "type": "MathClosure",
      "position": {
        "x": 1820,
        "y": -800
      },
      "width": 300,
      "label": "fragment",
      "params": {
        "source": "// Main fragment shader - exact match of original Godot shader\n// \n// Original fragment():\n//   vec2 xy = FRAGCOORD.xy;\n//   vec2 coord = xy + uOriginTextureBoundRect.xy;  // assume (0,0)\n//   float m = calculateMaskLinear(coord);\n//   float mLo = floor(m);\n//   ... Mitchell-Netravali 4-tap sampling with bilinear ...\n//   COLOR = mix(clo, cHi, m-mLo);\n\nvec2 coord = xy;  // uOriginTextureBoundRect.xy = (0,0)\nvec2 uEnlargedTextureSize = vec2(1080.0, 2400.0);\n\n// ============ Helper: bilinear(tex, xy, resolution) ============\n// Manual bilinear since textures use filter_nearest\n// vec4 bilinear(in sampler2D tex, vec2 xy, vec2 resolution) {\n//   xy -= 0.5;\n//   vec4 C0 = texture(tex, clampToEdge(vec2(ivec2(xy) + ivec2(1,1)) / resolution));\n//   vec4 C1 = texture(tex, clampToEdge(vec2(ivec2(xy) + ivec2(0,1)) / resolution));\n//   vec4 C2 = texture(tex, clampToEdge(vec2(ivec2(xy) + ivec2(1,0)) / resolution));\n//   vec4 C3 = texture(tex, clampToEdge(vec2(ivec2(xy) + ivec2(0,0)) / resolution));\n//   return mix(mix(C3,C2,fract(abs(xy.x))), mix(C1,C0,fract(abs(xy.x))), fract(abs(xy.y)));\n// }\n\n// ============ Helper: sampleFromMipmap inline ============\n// Original uses bilinear sampling on filter_nearest textures\n\nvec4 clo;\nvec4 cHi;\nfloat scale;\n\nfloat mLo = floor(m);\n\n// ============ Sample clo ============\nif (mLo < 0.1) {\n  // mLo == 0: simple bilinear from mip0\n  // sampleFromMipmap(coord, 0.0)\n  vec2 res0 = uEnlargedTextureSize;  // 1080x2400\n  vec2 p0 = coord - 0.5;\n  ivec2 i0 = ivec2(floor(p0));\n  vec2 f0 = fract(p0);\n  vec2 uv00 = clamp(vec2(i0) / res0, vec2(0.0), vec2(1.0));\n  vec2 uv10 = clamp(vec2(i0 + ivec2(1,0)) / res0, vec2(0.0), vec2(1.0));\n  vec2 uv01 = clamp(vec2(i0 + ivec2(0,1)) / res0, vec2(0.0), vec2(1.0));\n  vec2 uv11 = clamp(vec2(i0 + ivec2(1,1)) / res0, vec2(0.0), vec2(1.0));\n  vec4 c00 = samplePass(mip0, uv00);\n  vec4 c10 = samplePass(mip0, uv10);\n  vec4 c01 = samplePass(mip0, uv01);\n  vec4 c11 = samplePass(mip0, uv11);\n  clo = mix(mix(c00, c10, f0.x), mix(c01, c11, f0.x), f0.y);\n} else {\n  // mLo >= 1: Mitchell-Netravali 4-tap\n  // mvbUp(coord, scale) returns vec2[4](w1, w2, o1, o2)\n  scale = 1.0 / pow(2.0, mLo);\n  vec2 d = coord * scale - 0.5;\n  vec2 c = floor(d);\n  vec2 x = c - d + 1.0;\n  vec2 X = d - c;\n  vec2 x3 = x * x * x;\n  vec2 coeff = 0.5 * x * x + 0.5 * x + 0.166667;\n  vec2 w1 = -0.333333 * x3 + coeff;\n  vec2 w2 = 1.0 - w1;\n  vec2 o1 = (-0.5 * x3 + coeff) / w1 + c - 0.5;\n  vec2 o2 = (X * X * X / 6.0) / w2 + c + 1.5;\n  \n  // Sample 4 positions with bilinear\n  vec2 resLo = uEnlargedTextureSize / pow(2.0, mLo);\n  \n  // sampleFromMipmap(vec2(o1.x, o1.y), mLo) with bilinear\n  vec2 p_o1o1 = vec2(o1.x, o1.y) - 0.5;\n  vec2 p_o2o1 = vec2(o2.x, o1.y) - 0.5;\n  vec2 p_o1o2 = vec2(o1.x, o2.y) - 0.5;\n  vec2 p_o2o2 = vec2(o2.x, o2.y) - 0.5;\n  \n  // For each sample point, do bilinear\n  vec4 s00, s10, s01, s11;\n  \n  // Simplified: use samplePass directly (assumes render server handles filtering)\n  // The original uses filter_nearest + manual bilinear, but samplePass likely does bilinear\n  if (mLo < 1.5) {\n    s00 = samplePass(mip1, clamp(vec2(o1.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s10 = samplePass(mip1, clamp(vec2(o2.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s01 = samplePass(mip1, clamp(vec2(o1.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n    s11 = samplePass(mip1, clamp(vec2(o2.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n  } else if (mLo < 2.5) {\n    s00 = samplePass(mip2, clamp(vec2(o1.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s10 = samplePass(mip2, clamp(vec2(o2.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s01 = samplePass(mip2, clamp(vec2(o1.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n    s11 = samplePass(mip2, clamp(vec2(o2.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n  } else if (mLo < 3.5) {\n    s00 = samplePass(mip3, clamp(vec2(o1.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s10 = samplePass(mip3, clamp(vec2(o2.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s01 = samplePass(mip3, clamp(vec2(o1.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n    s11 = samplePass(mip3, clamp(vec2(o2.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n  } else if (mLo < 4.5) {\n    s00 = samplePass(mip4, clamp(vec2(o1.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s10 = samplePass(mip4, clamp(vec2(o2.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s01 = samplePass(mip4, clamp(vec2(o1.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n    s11 = samplePass(mip4, clamp(vec2(o2.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n  } else if (mLo < 5.5) {\n    s00 = samplePass(mip5, clamp(vec2(o1.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s10 = samplePass(mip5, clamp(vec2(o2.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s01 = samplePass(mip5, clamp(vec2(o1.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n    s11 = samplePass(mip5, clamp(vec2(o2.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n  } else {\n    s00 = samplePass(mip6, clamp(vec2(o1.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s10 = samplePass(mip6, clamp(vec2(o2.x, o1.y) / resLo, vec2(0.0), vec2(1.0)));\n    s01 = samplePass(mip6, clamp(vec2(o1.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n    s11 = samplePass(mip6, clamp(vec2(o2.x, o2.y) / resLo, vec2(0.0), vec2(1.0)));\n  }\n  \n  // Mitchell weights: clo = w1.x*w1.y*s00 + w2.x*w1.y*s10 + w1.x*w2.y*s01 + w2.x*w2.y*s11\n  clo = w1.x * w1.y * s00 + w2.x * w1.y * s10 + w1.x * w2.y * s01 + w2.x * w2.y * s11;\n}\n\n// ============ Sample cHi (always Mitchell 4-tap) ============\nfloat mHi = mLo + 1.0;\nscale = 1.0 / pow(2.0, mHi);\n\n// mvbUp for mHi\nvec2 dHi = coord * scale - 0.5;\nvec2 cHi_ = floor(dHi);\nvec2 xHi = cHi_ - dHi + 1.0;\nvec2 XHi = dHi - cHi_;\nvec2 x3Hi = xHi * xHi * xHi;\nvec2 coeffHi = 0.5 * xHi * xHi + 0.5 * xHi + 0.166667;\nvec2 w1Hi = -0.333333 * x3Hi + coeffHi;\nvec2 w2Hi = 1.0 - w1Hi;\nvec2 o1Hi = (-0.5 * x3Hi + coeffHi) / w1Hi + cHi_ - 0.5;\nvec2 o2Hi = (XHi * XHi * XHi / 6.0) / w2Hi + cHi_ + 1.5;\n\nvec2 resHi = uEnlargedTextureSize / pow(2.0, mHi);\n\nvec4 h00, h10, h01, h11;\nif (mHi < 1.5) {\n  h00 = samplePass(mip1, clamp(vec2(o1Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h10 = samplePass(mip1, clamp(vec2(o2Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h01 = samplePass(mip1, clamp(vec2(o1Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h11 = samplePass(mip1, clamp(vec2(o2Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n} else if (mHi < 2.5) {\n  h00 = samplePass(mip2, clamp(vec2(o1Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h10 = samplePass(mip2, clamp(vec2(o2Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h01 = samplePass(mip2, clamp(vec2(o1Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h11 = samplePass(mip2, clamp(vec2(o2Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n} else if (mHi < 3.5) {\n  h00 = samplePass(mip3, clamp(vec2(o1Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h10 = samplePass(mip3, clamp(vec2(o2Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h01 = samplePass(mip3, clamp(vec2(o1Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h11 = samplePass(mip3, clamp(vec2(o2Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n} else if (mHi < 4.5) {\n  h00 = samplePass(mip4, clamp(vec2(o1Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h10 = samplePass(mip4, clamp(vec2(o2Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h01 = samplePass(mip4, clamp(vec2(o1Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h11 = samplePass(mip4, clamp(vec2(o2Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n} else if (mHi < 5.5) {\n  h00 = samplePass(mip5, clamp(vec2(o1Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h10 = samplePass(mip5, clamp(vec2(o2Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h01 = samplePass(mip5, clamp(vec2(o1Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h11 = samplePass(mip5, clamp(vec2(o2Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n} else if (mHi < 6.5) {\n  h00 = samplePass(mip6, clamp(vec2(o1Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h10 = samplePass(mip6, clamp(vec2(o2Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h01 = samplePass(mip6, clamp(vec2(o1Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h11 = samplePass(mip6, clamp(vec2(o2Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n} else {\n  // mHi > 6.5, clamp to mip6\n  h00 = samplePass(mip6, clamp(vec2(o1Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h10 = samplePass(mip6, clamp(vec2(o2Hi.x, o1Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h01 = samplePass(mip6, clamp(vec2(o1Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n  h11 = samplePass(mip6, clamp(vec2(o2Hi.x, o2Hi.y) / resHi, vec2(0.0), vec2(1.0)));\n}\n\ncHi = w1Hi.x * w1Hi.y * h00 + w2Hi.x * w1Hi.y * h10 + w1Hi.x * w2Hi.y * h01 + w2Hi.x * w2Hi.y * h11;\n\n// ============ Final blend ============\n// COLOR = mix(clo, cHi, m - mLo);\noutput = mix(clo, cHi, m - mLo);"
      },
      "inputs": [
        {
          "id": "dynamic_xy",
          "name": "xy",
          "type": "vector2"
        },
        {
          "id": "dynamic_m",
          "name": "m",
          "type": "float"
        },
        {
          "id": "dynamic_mip0",
          "name": "mip0",
          "type": "pass"
        },
        {
          "id": "dynamic_mip1",
          "name": "mip1",
          "type": "pass"
        },
        {
          "id": "dynamic_mip2",
          "name": "mip2",
          "type": "pass"
        },
        {
          "id": "dynamic_mip3",
          "name": "mip3",
          "type": "pass"
        },
        {
          "id": "dynamic_mip4",
          "name": "mip4",
          "type": "pass"
        },
        {
          "id": "dynamic_mip5",
          "name": "mip5",
          "type": "pass"
        },
        {
          "id": "dynamic_mip6",
          "name": "mip6",
          "type": "pass"
        }
      ],
      "outputs": [
        {
          "id": "output",
          "name": "Output",
          "type": "vector4"
        }
      ],
      "inputBindings": [
        {
          "portId": "dynamic_xy",
          "label": "xy",
          "variableName": "xy",
          "type": "vector2",
          "sourceBinding": {
            "nodeId": "GeoFragcoord_1",
            "outputPortId": "xy",
            "outputLabel": "XY"
          }
        },
        {
          "portId": "dynamic_m",
          "label": "m",
          "variableName": "m",
          "type": "float",
          "sourceBinding": {
            "nodeId": "MathClosure_calculateMaskLinear",
            "outputPortId": "output",
            "outputLabel": "Output"
          }
        },
        {
          "portId": "dynamic_mip0",
          "label": "mip0",
          "variableName": "mip0",
          "type": "pass",
          "sourceBinding": {
            "nodeId": "RenderPass_mip0",
            "outputPortId": "pass",
            "outputLabel": "Pass"
          }
        },
        {
          "portId": "dynamic_mip1",
          "label": "mip1",
          "variableName": "mip1",
          "type": "pass",
          "sourceBinding": {
            "nodeId": "Downsample_mip1",
            "outputPortId": "output",
            "outputLabel": "Output"
          }
        },
        {
          "portId": "dynamic_mip2",
          "label": "mip2",
          "variableName": "mip2",
          "type": "pass",
          "sourceBinding": {
            "nodeId": "Downsample_mip2",
            "outputPortId": "output",
            "outputLabel": "Output"
          }
        },
        {
          "portId": "dynamic_mip3",
          "label": "mip3",
          "variableName": "mip3",
          "type": "pass",
          "sourceBinding": {
            "nodeId": "Downsample_mip3",
            "outputPortId": "output",
            "outputLabel": "Output"
          }
        },
        {
          "portId": "dynamic_mip4",
          "label": "mip4",
          "variableName": "mip4",
          "type": "pass",
          "sourceBinding": {
            "nodeId": "Downsample_mip4",
            "outputPortId": "output",
            "outputLabel": "Output"
          }
        },
        {
          "portId": "dynamic_mip5",
          "label": "mip5",
          "variableName": "mip5",
          "type": "pass",
          "sourceBinding": {
            "nodeId": "Downsample_mip5",
            "outputPortId": "output",
            "outputLabel": "Output"
          }
        },
        {
          "portId": "dynamic_mip6",
          "label": "mip6",
          "variableName": "mip6",
          "type": "pass",
          "sourceBinding": {
            "nodeId": "Downsample_mip6",
            "outputPortId": "output",
            "outputLabel": "Output"
          }
        }
      ]
    }
  ],
  "connections": [
    {
      "id": "conn_geo_mip0",
      "from": {
        "nodeId": "Rect2DGeometry_8",
        "portId": "geometry"
      },
      "to": {
        "nodeId": "RenderPass_mip0",
        "portId": "geometry"
      }
    },
    {
      "id": "conn_img_mip0",
      "from": {
        "nodeId": "ImageTexture_24",
        "portId": "color"
      },
      "to": {
        "nodeId": "RenderPass_mip0",
        "portId": "material"
      }
    },
    {
      "id": "conn_mip0_ds1",
      "from": {
        "nodeId": "RenderPass_mip0",
        "portId": "pass"
      },
      "to": {
        "nodeId": "Downsample_mip1",
        "portId": "source"
      }
    },
    {
      "id": "conn_kern9_ds1",
      "from": {
        "nodeId": "Kernel_9",
        "portId": "kernel"
      },
      "to": {
        "nodeId": "Downsample_mip1",
        "portId": "kernel"
      }
    },
    {
      "id": "conn_mip1_ds2",
      "from": {
        "nodeId": "Downsample_mip1",
        "portId": "output"
      },
      "to": {
        "nodeId": "Downsample_mip2",
        "portId": "source"
      }
    },
    {
      "id": "conn_kern14_ds2",
      "from": {
        "nodeId": "Kernel_14",
        "portId": "kernel"
      },
      "to": {
        "nodeId": "Downsample_mip2",
        "portId": "kernel"
      }
    },
    {
      "id": "conn_mip2_ds3",
      "from": {
        "nodeId": "Downsample_mip2",
        "portId": "output"
      },
      "to": {
        "nodeId": "Downsample_mip3",
        "portId": "source"
      }
    },
    {
      "id": "conn_kern15_ds3",
      "from": {
        "nodeId": "Kernel_15",
        "portId": "kernel"
      },
      "to": {
        "nodeId": "Downsample_mip3",
        "portId": "kernel"
      }
    },
    {
      "id": "conn_mip3_ds4",
      "from": {
        "nodeId": "Downsample_mip3",
        "portId": "output"
      },
      "to": {
        "nodeId": "Downsample_mip4",
        "portId": "source"
      }
    },
    {
      "id": "conn_kern17_ds4",
      "from": {
        "nodeId": "Kernel_17",
        "portId": "kernel"
      },
      "to": {
        "nodeId": "Downsample_mip4",
        "portId": "kernel"
      }
    },
    {
      "id": "conn_mip4_ds5",
      "from": {
        "nodeId": "Downsample_mip4",
        "portId": "output"
      },
      "to": {
        "nodeId": "Downsample_mip5",
        "portId": "source"
      }
    },
    {
      "id": "conn_kern19_ds5",
      "from": {
        "nodeId": "Kernel_19",
        "portId": "kernel"
      },
      "to": {
        "nodeId": "Downsample_mip5",
        "portId": "kernel"
      }
    },
    {
      "id": "conn_mip5_ds6",
      "from": {
        "nodeId": "Downsample_mip5",
        "portId": "output"
      },
      "to": {
        "nodeId": "Downsample_mip6",
        "portId": "source"
      }
    },
    {
      "id": "conn_kern21_ds6",
      "from": {
        "nodeId": "Kernel_21",
        "portId": "kernel"
      },
      "to": {
        "nodeId": "Downsample_mip6",
        "portId": "kernel"
      }
    },
    {
      "id": "conn_fragcoord_mask",
      "from": {
        "nodeId": "GeoFragcoord_1",
        "portId": "xy"
      },
      "to": {
        "nodeId": "MathClosure_calculateMaskLinear",
        "portId": "dynamic_xy"
      }
    },
    {
      "id": "conn_fragcoord_frag",
      "from": {
        "nodeId": "GeoFragcoord_1",
        "portId": "xy"
      },
      "to": {
        "nodeId": "MathClosure_fragment",
        "portId": "dynamic_xy"
      }
    },
    {
      "id": "conn_mask_frag",
      "from": {
        "nodeId": "MathClosure_calculateMaskLinear",
        "portId": "output"
      },
      "to": {
        "nodeId": "MathClosure_fragment",
        "portId": "dynamic_m"
      }
    },
    {
      "id": "conn_mip0_frag",
      "from": {
        "nodeId": "RenderPass_mip0",
        "portId": "pass"
      },
      "to": {
        "nodeId": "MathClosure_fragment",
        "portId": "dynamic_mip0"
      }
    },
    {
      "id": "conn_mip1_frag",
      "from": {
        "nodeId": "Downsample_mip1",
        "portId": "output"
      },
      "to": {
        "nodeId": "MathClosure_fragment",
        "portId": "dynamic_mip1"
      }
    },
    {
      "id": "conn_mip2_frag",
      "from": {
        "nodeId": "Downsample_mip2",
        "portId": "output"
      },
      "to": {
        "nodeId": "MathClosure_fragment",
        "portId": "dynamic_mip2"
      }
    },
    {
      "id": "conn_mip3_frag",
      "from": {
        "nodeId": "Downsample_mip3",
        "portId": "output"
      },
      "to": {
        "nodeId": "MathClosure_fragment",
        "portId": "dynamic_mip3"
      }
    },
    {
      "id": "conn_mip4_frag",
      "from": {
        "nodeId": "Downsample_mip4",
        "portId": "output"
      },
      "to": {
        "nodeId": "MathClosure_fragment",
        "portId": "dynamic_mip4"
      }
    },
    {
      "id": "conn_mip5_frag",
      "from": {
        "nodeId": "Downsample_mip5",
        "portId": "output"
      },
      "to": {
        "nodeId": "MathClosure_fragment",
        "portId": "dynamic_mip5"
      }
    },
    {
      "id": "conn_mip6_frag",
      "from": {
        "nodeId": "Downsample_mip6",
        "portId": "output"
      },
      "to": {
        "nodeId": "MathClosure_fragment",
        "portId": "dynamic_mip6"
      }
    },
    {
      "id": "conn_frag_final",
      "from": {
        "nodeId": "MathClosure_fragment",
        "portId": "output"
      },
      "to": {
        "nodeId": "RenderPass_final",
        "portId": "material"
      }
    },
    {
      "id": "conn_geo_final",
      "from": {
        "nodeId": "Rect2DGeometry_final",
        "portId": "geometry"
      },
      "to": {
        "nodeId": "RenderPass_final",
        "portId": "geometry"
      }
    },
    {
      "id": "conn_final_comp",
      "from": {
        "nodeId": "RenderPass_final",
        "portId": "pass"
      },
      "to": {
        "nodeId": "Composite_84",
        "portId": "pass"
      }
    },
    {
      "id": "conn_rt_comp",
      "from": {
        "nodeId": "RenderTexture_3",
        "portId": "texture"
      },
      "to": {
        "nodeId": "Composite_84",
        "portId": "target"
      }
    },
    {
      "id": "conn_comp_screen",
      "from": {
        "nodeId": "Composite_84",
        "portId": "pass"
      },
      "to": {
        "nodeId": "Screen_1",
        "portId": "pass"
      }
    }
  ],
  "outputs": {
    "composite": "Composite_84"
  },
  "groups": []
}